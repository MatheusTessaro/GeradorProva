<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="head :: head"></head>

<body>
	<!-- 
    BARRA DE NAVEGACAO 
  -->
	<div th:replace="menu :: menu"></div>
	<!-- 
    CONTEUDO DA PAGINA 
  -->
	<main class="container">
		<div class="bg-light p-5 rounded">
			<h3>Gerenciar Quest達o</h3>

			<div th:switch="${questao.idQuestao>0}">
				<p th:case="${true}">Atualizar Quest達o</p>
				<p th:case="*">Cadastro Quest達o</p>
			</div>

			<form th:object="${questao}" th:action="@{/questao/salvar/}"
				method="POST">
				<input type="hidden" th:field="${questao.idQuestao}" th:if="${questao.idQuestao}" />

				<div class="row">
					<div class="col-6">
						<label class="form-label" for="tag">Tag</label>
						
						<select th:field="*{idTag}" name="" id="" class="form-control select2-single">
							<option th:each="tag : ${tagList}" th:value="${tag.idTag}" th:text="${tag.nome}">
						</select>
					</div>
	
					<div class="col-6">
						<label class="form-label" for="dificuldade">Grau de Dificuldade</label>
						<select id="idDificuldade" name="dificuldade" th:field="*{dificuldade}" class="form-control select2-single">
						    <option th:each="dif : ${T(br.com.geradorprova.model.enumeration.Dificuldade).values()}"
						            th:value="${dif}"
						            th:text="${dif.valor}">
						    </option>
						</select>
					</div>
				</div>

				<div class="row">
					<div class="col-6">
						<label class="form-label" for="tipo">Tipo de Quest達o</label>
						<select id="idtipoQuestao" name="tipoQuestao" th:field="*{tipoQuestao}" class="form-control select2-single">
						    <option th:each="tipo : ${T(br.com.geradorprova.model.enumeration.TipoQuestao).values()}"
						            th:value="${tipo}"
						            th:text="${tipo.valor}">
						    </option>
						</select>
					</div>
				</div>
				
				<div id="ajaxLoadedContent"></div>

				
				
				<div class="mb-3">
					<p th:switch="${questao.idQuestao>0}">
						<button th:case="${true}" type="submit"
							class="btn-c btn btn-secondary active my-3">Atualizar</button>
						<button th:case="*" type="submit"
							class="btn-c btn btn-secondary active my-3">Adicionar</button>
					</p>
				</div>

			</form>
		</div>
	</main>
	<script type="text/javascript" th:src="@{/js/bootstrap.bundle.min.js}"></script>
	<script th:inline="javascript">
		/*<![CDATA][*/
			$(document).ready(function () {
				
				console.log($("#idtipoQuestao :selected").val());
			

				$("#idtipoQuestao").change(function (){
					
					$.ajax({
			            url : 'ajax/tipo',
			            type : 'post',
			            data : $(/*[[${questao}]]*/).serialize(),
			            success : function(response) {
			                if ($(response).find('.has-error').length) {
			                	$("#ajaxLoadedContent").replaceWith(response);
			                }
			                else{
			                    $("#ajaxLoadedContent").replaceWith(response);
			                }
			            }
			        });
					
				});
			
			});
			
		
		/*]]>*/	
	</script>
</body>
</html>